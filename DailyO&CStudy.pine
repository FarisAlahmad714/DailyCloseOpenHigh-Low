//@version=5
indicator("Daily O/H/L (One Day Only), Replay Friendly", overlay=true)

// "Real-time" daily data so the high/low updates as the day forms:
dailyOpen = request.security(syminfo.tickerid, "D", open,  lookahead=barmerge.lookahead_off)
dailyHigh = request.security(syminfo.tickerid, "D", high,  lookahead=barmerge.lookahead_off)
dailyLow  = request.security(syminfo.tickerid, "D", low,   lookahead=barmerge.lookahead_off)

// Detect day rollover on your chart timeframe:
newDay = ta.change(time("D"))

// Track line references for each of the three lines:
var line openLine = na
var line highLine = na
var line lowLine  = na

if barstate.isnew
    // If we just entered a new day on the chart timeframe, remove old lines
    if newDay
        line.delete(openLine)
        line.delete(highLine)
        line.delete(lowLine)
        
        // Then draw new lines (just from the current bar_index to bar_index+1, for example):
        openLine := line.new(bar_index, dailyOpen, bar_index+1, dailyOpen, extend=extend.none, color=color.new(color.white, 0))
        highLine := line.new(bar_index, dailyHigh, bar_index+1, dailyHigh, extend=extend.none, color=color.new(color.lime,  0))
        lowLine  := line.new(bar_index, dailyLow,  bar_index+1, dailyLow,  extend=extend.none, color=color.new(color.red,   0))
